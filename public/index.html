<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EXOPLAY â€” Space Survival</title>
    <meta name="description" content="Real-time multiplayer cooperative space survival game">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- MOBILE BLOCK SCREEN -->
    <div id="mobileBlock" class="mobile-block" style="display:none;">
        <div class="mobile-block-content">
            <div class="mobile-block-icon">ðŸš€</div>
            <h1 class="mobile-block-title">EXOPLAY</h1>
            <div class="mobile-block-divider"></div>
            <p class="mobile-block-msg">This game is not yet available on mobile devices.</p>
            <p class="mobile-block-coming">COMING SOON</p>
            <div class="mobile-block-dots">
                <span></span><span></span><span></span>
            </div>
            <p class="mobile-block-hint">Please visit on a desktop or laptop browser to play.</p>
        </div>
    </div>

    <!-- DISCLAIMER & GUIDELINES OVERLAY -->
    <div id="disclaimerOverlay" class="overlay" style="display:none;">
        <div class="disclaimer-container">
            <div class="disclaimer-box">
                <div class="disclaimer-header">âš  CLASSIFIED BRIEFING âš </div>
                <div id="disclaimerText" class="disclaimer-text"></div>
                <div id="guidelinesBox" class="guidelines-box" style="display:none;">
                    <div class="guidelines-title">MISSION GUIDELINES</div>
                    <ul class="guidelines-list">
                        <li><span class="gl-key">WASD</span> Move your operative</li>
                        <li><span class="gl-key">CLICK</span> Attack enemies</li>
                        <li><span class="gl-key">E</span> Interact with objectives &amp; terminals</li>
                        <li><span class="gl-key">Q</span> Activate special ability</li>
                        <li><span class="gl-key">TAB</span> View live scoreboard</li>
                        <li><span class="gl-key">ENTER</span> Team chat</li>
                    </ul>
                    <p class="guidelines-note">Complete all objectives before the 10-minute timer runs out. Trivia
                        terminals appear after each repair â€” answer correctly to advance. Work together to survive.</p>
                </div>
                <button id="disclaimerContinueBtn" class="btn btn-primary disclaimer-btn" style="display:none;">COMMENCE
                    MISSION</button>
                <button id="disclaimerSkipBtn" class="btn btn-secondary disclaimer-btn" style="display:none; margin-left: 10px; background: rgba(255,100,100,0.2); border-color: rgba(255,100,100,0.5); color: #ff6666;">SKIP BRIEFING</button>
            </div>
        </div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <!-- TRIVIA TERMINAL OVERLAY -->
    <div id="triviaOverlay" class="overlay" style="display:none;">
        <div class="trivia-terminal">
            <!-- Top bezel -->
            <div class="tt-bezel tt-bezel-top">
                <div class="tt-light tt-light-green"></div>
                <div class="tt-slot"></div>
                <div class="tt-light-bar"><span></span><span></span><span></span><span></span></div>
            </div>
            <!-- Main screen -->
            <div class="tt-screen">
                <div class="tt-scanline"></div>
                <div class="tt-header">MISSION TERMINAL v3.2</div>
                <div class="tt-divider"></div>
                <div id="triviaCounter" class="tt-counter">QUESTION 1 / 1</div>
                <div class="tt-divider tt-divider-thin"></div>
                <div id="triviaQuestion" class="tt-question"></div>
                <div id="triviaOptions" class="tt-options"></div>
                <div class="tt-footer">
                    <div class="tt-radar">
                        <div class="tt-radar-ring"></div>
                        <div class="tt-radar-sweep"></div>
                        <div class="tt-radar-dot"></div>
                    </div>
                    <div id="triviaTimer" class="tt-timer">TIME REMAINING: <span id="triviaTimerNum">10</span> SECONDS
                    </div>
                </div>
            </div>
            <!-- Bottom bezel -->
            <div class="tt-bezel tt-bezel-bottom">
                <div class="tt-slot tt-slot-wide"></div>
                <div class="tt-light tt-light-red"></div>
                <div class="tt-light-bar"><span></span><span></span><span></span></div>
                <div class="tt-light tt-light-amber"></div>
            </div>
            <!-- Side decorations -->
            <div class="tt-side tt-side-left">
                <div class="tt-bolt"></div>
                <div class="tt-vert-bar"><span></span><span></span><span></span><span></span><span></span></div>
                <div class="tt-bolt"></div>
            </div>
            <div class="tt-side tt-side-right">
                <div class="tt-bolt"></div>
                <div class="tt-vert-bar"><span></span><span></span><span></span><span></span><span></span></div>
                <div class="tt-bolt"></div>
            </div>
        </div>
    </div>

    <!-- LOBBY OVERLAY -->
    <div id="lobbyOverlay" class="overlay">
        <div class="lobby-container">
            <h1 class="game-title">EXOPLAY</h1>
            <p class="game-subtitle">COOPERATIVE SPACE SURVIVAL</p>

            <div id="connectScreen">
                <input type="text" id="nameInput" placeholder="ENTER CALLSIGN" maxlength="12" />
                <div class="btn-group">
                    <button id="createBtn" class="btn btn-primary">CREATE ROOM</button>
                    <div class="join-row">
                        <input type="text" id="roomCodeInput" placeholder="ROOM CODE" maxlength="4" />
                        <button id="joinBtn" class="btn btn-secondary">JOIN</button>
                    </div>
                </div>
                <p id="errorMsg" class="error-msg"></p>
            </div>

            <div id="roomScreen" style="display:none;">
                <div class="room-code-display">
                    ROOM: <span id="roomCodeDisplay"></span>
                    <button id="copyRoomCodeBtn" class="btn btn-secondary" title="Copy room code"
                        style="padding: 8px 12px; margin-left:10px; font-size: 1.1rem; background: rgba(100, 200, 255, 0.2); border-color: rgba(100, 200, 255, 0.5); color: #64c8ff; cursor: pointer;">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
                <div class="audio-controls" style="display: flex; gap: 10px; margin-top: 15px; align-items: center;">
                    <span style="color: #aaa; font-size: 0.9rem; font-weight: bold;">AUDIO:</span>
                    <button id="speakerBtn" class="btn btn-secondary" title="Toggle Background Music"
                        style="padding: 10px 16px; font-size: 1.2rem; background: rgba(76, 175, 80, 0.3); border-color: rgba(76, 175, 80, 0.7); border-radius: 6px; color: #4caf50; cursor: pointer; flex-shrink: 0; transition: all 0.2s;">
                        <i class="fas fa-volume-up"></i>
                        <span style="margin-left: 6px; font-size: 0.9rem;">MUSIC</span>
                    </button>
                    <button id="sfxBtn" class="btn btn-secondary" title="Toggle Sound Effects"
                        style="padding: 10px 16px; font-size: 1.2rem; background: rgba(255, 152, 0, 0.3); border-color: rgba(255, 152, 0, 0.7); border-radius: 6px; color: #ff9800; cursor: pointer; flex-shrink: 0; transition: all 0.2s;">
                        <i class="fas fa-music"></i>
                        <span style="margin-left: 6px; font-size: 0.9rem;">SFX</span>
                    </button>
                </div>
                <div class="voice-controls" style="display: flex; gap: 10px; margin-top: 15px; align-items: center;">
                    <span style="color: #aaa; font-size: 0.9rem; font-weight: bold;">VOICE:</span>
                    <select id="speakerSelect" class="btn btn-secondary"
                        style="display:none; padding: 6px; margin-left: 10px; font-size: 0.8rem; background: rgba(0,0,0,0.5); border-color: rgba(255, 255, 255, 0.2); color: #fff; max-width: 150px; text-overflow: ellipsis; outline: none;"></select>
                    <button id="micBtn" class="btn btn-secondary" title="Toggle Microphone"
                        style="padding: 10px 16px; font-size: 1.2rem; background: rgba(244, 67, 54, 0.3); border-color: rgba(244, 67, 54, 0.7); border-radius: 6px; color: #f44336; cursor: pointer; flex-shrink: 0; transition: all 0.2s;">
                        <i class="fas fa-microphone"></i>
                        <span style="margin-left: 6px; font-size: 0.9rem;">MIC</span>
                    </button>
                </div>
                <div id="roleSelection" class="role-grid">
                    <div class="role-card" data-role="vanguard">
                        <div class="role-avatar-container">
                            <img class="role-avatar-char" src="/assets/vanguard/rotations/east.png" alt="Vanguard">
                            <img class="role-avatar-weapon weapon-vanguard"
                                src="/assets/sword-vanguard/rotations/east.png" alt="Sword">
                        </div>
                        <h3>VANGUARD</h3>
                        <div class="role-stats">
                            <span>HP: 220</span><span>DMG: 28</span>
                        </div>
                        <p class="role-desc">Frontline tank. Melee strikes. Regen in combat.</p>
                        <p class="role-ability">Q: Overdrive â€” 40 dmg, -30% taken (6s)</p>
                    </div>
                    <div class="role-card" data-role="engineer">
                        <div class="role-avatar-container">
                            <img class="role-avatar-char" src="/assets/engineer/rotations/east.png" alt="Engineer">
                            <img class="role-avatar-weapon weapon-engineer" src="/assets/spear.png" alt="Spear">
                        </div>
                        <h3>ENGINEER</h3>
                        <div class="role-stats">
                            <span>HP: 170</span><span>DMG: 18</span>
                        </div>
                        <p class="role-desc">Repairs objects 40% faster. Deploys auto-turrets.</p>
                        <p class="role-ability">Q: Auto-Turret â€” 40 dps turret (12s)</p>
                    </div>
                    <div class="role-card" data-role="scout">
                        <div class="role-avatar-container">
                            <img class="role-avatar-char flip-east" src="/assets/scout/rotations/east.png" alt="Scout">
                            <img class="role-avatar-weapon weapon-scout" src="/assets/gun.png" alt="Gun">
                        </div>
                        <h3>SCOUT</h3>
                        <div class="role-stats">
                            <span>HP: 140</span><span>DMG: 22</span>
                        </div>
                        <p class="role-desc">Fast mover. Reveals enemy positions on minimap.</p>
                        <p class="role-ability">Q: Piercing Shot â€” 150 dmg, penetrates enemies</p>
                    </div>
                    <div class="role-card" data-role="medic">
                        <div class="role-avatar-container">
                            <img class="role-avatar-char flip-east" src="/assets/medic/rotations/east.png" alt="Medic">
                            <img class="role-avatar-weapon weapon-medic" src="/assets/medbox.png" alt="Medbox">
                        </div>
                        <h3>MEDIC</h3>
                        <div class="role-stats">
                            <span>HP: 160</span><span>DMG: 10</span>
                        </div>
                        <p class="role-desc">Healer. 20 HP/s heal beam to allies.</p>
                        <p class="role-ability">Q: Field Surge â€” 50% max HP burst AoE heal</p>
                    </div>
                </div>
                <div id="playerList" class="player-list"></div>
                <div class="lobby-actions">
                    <button id="readyBtn" class="btn btn-ready">READY</button>
                    <button id="startBtn" class="btn btn-start" style="display:none;">LAUNCH MISSION</button>
                </div>
            </div>
        </div>
    </div>

    <!-- GAME OVER OVERLAY -->
    <div id="gameOverOverlay" class="overlay" style="display:none;">
        <div class="gameover-container">
            <h1 id="gameOverTitle" class="gameover-title"></h1>
            <p id="gameOverSubtitle" class="gameover-subtitle"></p>
            <div id="finalScoreboard" class="final-scoreboard"></div>
            <button id="backToLobbyBtn" class="btn btn-primary">RETURN TO BASE</button>
        </div>
    </div>

        <div id="hud" style="display:none;">
        <div id="timerDisplay" class="hud-timer">10:00</div>
        <div id="objectiveDisplay" class="hud-objective"></div>
        <div id="phaseDisplay" class="hud-phase"></div>
        <div id="hudAudioControls" style="position: absolute; top: 10px; right: 10px; display: flex; gap: 5px;">
            <button id="hudBgMuteBtn" class="btn btn-secondary" title="Toggle background music" style="padding: 8px 12px; font-size: 1.1rem; background: rgba(230, 57, 70, 0.2); border-color: rgba(230, 57, 70, 0.5); color: #e63946; cursor: pointer;">
                <i class="fas fa-volume-up"></i>
            </button>
            <button id="hudSfxMuteBtn" class="btn btn-secondary" title="Toggle sound effects" style="padding: 8px 12px; font-size: 1.1rem; background: rgba(230, 57, 70, 0.2); border-color: rgba(230, 57, 70, 0.5); color: #e63946; cursor: pointer;">
                <i class="fas fa-music"></i>
            </button>
        </div>
        <div id="playerHud" class="hud-player">
            <div class="hud-hp-bar-container">
                <div id="hudHpBar" class="hud-hp-bar"></div>
                <span id="hudHpText" class="hud-hp-text">220/220</span>
            </div>
            <div id="hudAbility" class="hud-ability">
                <span id="hudAbilityKey">Q</span>
                <div id="hudAbilityCd" class="hud-ability-cd"></div>
            </div>
        </div>
        <div id="controlsHint" class="hud-controls">WASD Move Â· Click Attack Â· E Interact Â· Q Ability Â· Tab Scores Â·
            Enter Chat</div>

        <div id="chatBox" class="hud-chat">
            <div id="chatMessages" class="chat-messages"></div>
            <input type="text" id="chatInput" class="chat-input" placeholder="Press Enter to chat..." maxlength="100"
                style="display:none;" />
        </div>
    </div>

    <script>
        (function () {
            var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
                || (navigator.maxTouchPoints > 1 && window.innerWidth < 1024);
            if (isMobile) {
                document.getElementById('mobileBlock').style.display = 'flex';
                document.getElementById('lobbyOverlay').style.display = 'none';
                document.getElementById('gameCanvas').style.display = 'none';
            }
        })();
    </script>
    <script type="module" src="js/main.js"></script>
</body>

</html>